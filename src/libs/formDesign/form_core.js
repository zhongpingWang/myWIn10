!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=20)}([function(e,t,n){"use strict";var o={addClass:function(e,t){var n=e.className.trim();n.indexOf(t)>-1||(e.className="".concat(n," ").concat(t.trim()))},removeClass:function(e,t){var n=e.className.trim();if(!(n.indexOf(t)<0)){var o=n.split(" "),r=o.indexOf(t);r>-1&&o.splice(r,1),e.className=o.join(" ")}},addRemoveClass:function(e,t,n){this.addClass(e,t),this.removeClass(e,n)},createElement:function(e,t){var n=document.createElement(e);if(t){var o=t.Attr;if(o)for(var r in o)n.setAttribute(r,o[r]);var i=t.Default;if(i)for(var a in i)n[a]=i[a]}return n},setStyle:function(e,t){for(var n in t)e.style[n]=t[n]},inheritObject:function(e){function t(){}return t.prototype=e,new t},inheritPrototype:function(e,t){var n=this.inheritObject(t.prototype);n.constructor=e,e.prototype=n},Mixins:function(e,t){for(var n in e)t[n]||(t[n]=e[n])}};t.a=o},function(e,t,n){"use strict";var o={addEventListener:function(e){document.addEventListener(e,(function(){var t=[e];Array.prototype.push.apply(t,Array.prototype.splice.call(arguments,0)),o.triggeEventListener.apply(o,t)}))},triggeEventListener:function(e){var t=o[e];if(t)for(var n=Array.prototype.splice.call(arguments,1),r=0;r<t.length;r++){var i=t[r];if("function"==typeof i.fn){var a=n.concat(i.params);i.fn.apply(i.content,a)}}},removeEvent:function(e,t){var n=this[e];n&&n[t]&&n.splice(t,1)}};t.a={addEventListener:function(e,t,n){o[e]||(o[e]=[],o.addEventListener(e)),o[e].push({fn:t,content:n,params:Array.prototype.splice.call(arguments,3)});var r=o[e].length-1;return{eventType:e,eventIndex:r,remove:function(){o.removeEvent(e,r)}}},removeEventListener:function(e,t){o.removeEvent(e,t)},triggeEventListener:function(){o.triggeEventListener.apply(o,arguments)}}},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);n(2),n(3);var o=n(0);function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var i=+new Date,a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,(n=[{key:"addRemove",value:function(){var e=o.a.createElement("i",{Attr:{class:"zppiconfont zppicon-close"}});this.el.children[0].before(e);var t=this;e.addEventListener("click",(function(e){t.el.parentElement.removeChild(t.el),Form_Core.CurrentInstances=!1,delete Form_Core.Instances[t.el.id],e.stopPropagation()}),!1)}},{key:"genId",value:function(){var e=this.Meta&&this.Meta.key||"NoNameControl";return i+=1,"".concat(e,"_").concat(i)}},{key:"genControlItemNode",value:function(){var e=document.createElement("div");e.id=this.Meta.id;var t=["controlItem"];return this.Meta.isRequired&&t.push("required"),0==this.Meta.direction?t.push("Horizontal"):t.push("Vertical"),this.Meta.hideTitle&&t.push("hideTitle"),e.className=t.join(" "),e.setAttribute("key",this.Meta.key),{controlItemNode:e}}},{key:"genTitleNode",value:function(){var e=document.createElement("div");e.className="titleBox";var t=document.createElement("label");return t.className="titleText",t.innerText=this.Meta.title,e.appendChild(t),{titleNode:e,titleTextNode:t}}},{key:"genIsRequiredNode",value:function(){var e=document.createElement("span");return e.className="isRequired",e.innerText="*",{isRequiredNode:e}}},{key:"setTitle",value:function(e){this.elementObj.titleTextNode.innerText=e,this.Meta.title=e}},{key:"setTtitleVisible",value:function(e){this.Meta.hideTitle=e?1:0,e?o.a.addClass(this.elementObj.controlItemNode,"hideTitle"):o.a.removeClass(this.elementObj.controlItemNode,"hideTitle")}},{key:"setPlaceHolder",value:function(e){this.elementObj.textareNode.setAttribute("placeholder",e),this.Meta.placeholder=e}},{key:"setIsRequired",value:function(e){this.Meta.isRequired=e,e?o.a.addClass(this.elementObj.controlItemNode,"required"):o.a.removeClass(this.elementObj.controlItemNode,"required")}},{key:"setLayout",value:function(e){this.Meta.direction=e,0==e?o.a.addRemoveClass(this.elementObj.controlItemNode,"Horizontal","Vertical"):o.a.addRemoveClass(this.elementObj.controlItemNode,"Vertical","Horizontal")}}])&&r(t.prototype,n),a&&r(t,a),e}(),l=n(1),s={_SelectionBoxNode:!1,_TbodyNode:!1,_MouseDownPositon:{X:0,Y:0},GlobalEvents:[],_SelectionTds:[],isBindGloablEvent:!1,init:function(e,t){if(!this.GlobalEvents[t]){this.GlobalEvents[t]=[];var n=this,r=function(e){document.querySelectorAll(".td.selected").forEach((function(e){o.a.removeClass(e,"selected")})),n.parseTarget(e),e.stopPropagation()};e.addEventListener("mousedown",r,!1),this.GlobalEvents[t].push({remove:function(){e.removeEventListener("mousedown",r)}});var i=l.a.addEventListener("mousemove",(function(e){if(n._SelectionBoxNode){var t=n.setSelectionBoxPosition(e);n.setSelectionTdBg(e,t)}}));this.GlobalEvents[t].push(i);var a=l.a.addEventListener("mouseup",(function(e){n.cleanSelectionBoxPosition()}));this.GlobalEvents[t].push(a),this.isBindGloablEvent||(this.isBindGloablEvent=!0,l.a.addEventListener("click",(function(e){document.querySelectorAll(".td.selected").forEach((function(e){o.a.removeClass(e,"selected")}))})))}},destroy:function(e){var t=this.GlobalEvents[e];if(t){for(var n=0;n<t.length;n++)t[n].remove&&t[n].remove();delete this.GlobalEvents[e]}},isSubTableNotDesign:function(e){for(var t=!0,n=e.target.parentNode,o=!0;t;)"Table"==n.getAttribute("key")?(t=!1,n.className.indexOf("design")>0&&(o=!1)):n=n.parentNode;return o},parseTarget:function(e){if(!this.isSubTableNotDesign(e)){var t=e.target.className;"txtDiv"!=t&&t.indexOf("td")<0||(o.a.addClass(document.body,"noSelected"),this._TbodyNode=e.currentTarget,o.a.addClass(e.target.parentElement.parentElement,"selected"),this._MouseDownPositon.X=e.pageX,this._MouseDownPositon.Y=e.pageY,this.initSelectionBox())}},setSelectionBoxPosition:function(e){if(this._SelectionBoxNode){var t=this._MouseDownPositon,n=t.X,r=t.Y,i=e.pageX,a=e.pageY,l=i-n,s=a-r,d=n,c=r;return(n!=i||r!=a)&&(l<0&&(d=n+l,l=Math.abs(l)),s<0&&(c=r+s,s=Math.abs(s)),o.a.setStyle(this._SelectionBoxNode,{width:"".concat(l,"px"),height:"".concat(s,"px"),left:"".concat(d,"px"),top:"".concat(c,"px")}),{selectionBoxWidth:l,selectionBoxHeight:s,selectionBoxLeft:d,selectionBoxTop:c})}},setSelectionTdBg:function(e,t){if(this._SelectionBoxNode){var n=e.pageX,o=e.pageY,r=this._TbodyNode.getBoundingClientRect(),i=r.left,a=r.top,l=r.right,s=r.bottom;if(n<i||n>l||o<a||o>s)return!1;this.cleanTdClass(),this.diffSelectionTdBg(t)}},diffSelectionTdBg:function(e){this._SelectionTds=[];for(var t=e.selectionBoxWidth,n=e.selectionBoxHeight,r=e.selectionBoxLeft,i=e.selectionBoxTop,a=r+t,l=i+n,s=this._TbodyNode.querySelectorAll("tr"),d=0,c=0,u=!1,f=0;f<s.length;f++){var h=s[f].querySelectorAll(".td");if(h.length>0){this.hasMergeCellTd(h)?(d=0,c=h.length,u=!0):u&&(c=h.length);for(var p=d,v=c&&c||h.length;p<v;p++){var y=h[p],m=y.getBoundingClientRect(),g=m.left,b=m.top,N=m.right,S=m.bottom,T=y.colSpan,C=y.rowSpan;if(S<i){if(1!=T||1!=C)continue;if(this.hasMergeCellTd(h))continue;break}if(!(S>l&&(this.hasMergeCellTd(h)||(f=s.length),b>l)))if(N<r){if(this.hasMergeCellTd(h)||d++,S<i){if(1!=T&&1!=C)continue;break}}else{if(a<g){if(1!=T||1!=C)continue;this.hasMergeCellTd(h)||(c=p);break}if((T>1||C>1)&&y.className.indexOf("selected")<0)return o.a.addClass(y,"selected"),this.mergeCellTdExtendSelectionNodePosition({top:b,left:g,right:N,bottom:S,selectionBoxLeft:r,selectionBoxRight:a,selectionBoxTop:i,selectionBoxBottom:l,SelectionNodePosition:e}),!1;this._SelectionTds.push(y)}}}}for(var x=0;x<this._SelectionTds.length;x++)o.a.addClass(this._SelectionTds[x],"selected")},mergeCellTdExtendSelectionNodePosition:function(e){var t=e.top,n=e.left,o=e.right,r=e.bottom,i=e.selectionBoxLeft,a=e.selectionBoxRight,l=e.selectionBoxTop,s=e.selectionBoxBottom,d=e.SelectionNodePosition;n<i?(d.selectionBoxWidth=o<a?a-n-3:o-n-3,d.selectionBoxLeft=n+1):o>a&&(d.selectionBoxWidth=n<i?o-n-3:o-i-3),t<l?(d.selectionBoxHeight=r<s?s-t-3:r-t-3,d.selectionBoxTop=t+1):r>s&&(d.selectionBoxHeight=t<l?r-t-3:r-l-3),this.diffSelectionTdBg(d)},hasMergeCellTd:function(e){var t=!1,n=this._TbodyNode.previousElementSibling.querySelectorAll(".th").length-1;if(e.length!=n)return!0;for(var o=0;o<e.length;o++)if(1!=e[o].rowSpan||1!=e[o].colSpan){t=!0;break}return t},cleanTdClass:function(){var e=this._TbodyNode.querySelectorAll("td.selected");e.length>0&&e.forEach((function(e){o.a.removeClass(e,"selected")}))},initSelectionBox:function(){this._SelectionBoxNode=o.a.createElement("div",{Attr:{id:"selectionBox",class:"selectionBox"}}),document.body.appendChild(this._SelectionBoxNode)},cleanSelectionBoxPosition:function(){this._SelectionBoxNode&&(this._TbodyNode=!1,this._SelectionBoxNode.parentNode.removeChild(this._SelectionBoxNode),this._SelectionBoxNode=!1,o.a.removeClass(document.body,"noSelected"))}},d=function(e){var t=e.querySelector(".td.selected");if(t&&1!=e.querySelectorAll(".td.selected").length){for(var n=t.parentNode,o=n.querySelectorAll(".td.selected"),r=0,i=0;i<o.length;i++)r+=o[i].colSpan;for(var a=1,l=n.nextElementSibling,s=e.querySelectorAll(".td.selected"),d=s[s.length-1].parentElement.rowIndex;l;){l.querySelector(".td.selected")||l.rowIndex<=d?(l=l.nextElementSibling,a++):l=!1}e.querySelectorAll(".td.selected").forEach((function(e,t){0!=t&&e.parentNode.removeChild(e)})),t.rowSpan=a,t.colSpan=r}};n(4);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function p(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,n=!(r=u(t).call(this))||"object"!==c(r)&&"function"!=typeof r?f(o):r,e?n.Meta=e:(n.Meta=n.defaultMeta(),n.Meta.id=n.genId()),Form_Core.Instances[n.Meta.id]=f(n),n.render(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,e),p(t,[{key:"defaultMeta",value:function(){return{key:t.Meta.key,name:t.Meta.name,OtherSettings:{},Settings:{},placeholder:"",Values:{text:""}}}}]),p(t,[{key:"render",value:function(){var e=this.genControlItemNode().controlItemNode;e.className+=" ".concat(this.Meta.key);var t=o.a.createElement("div",{Attr:{class:"txtDiv",contenteditable:!0}});return e.appendChild(t),this.elementObj={controlItemNode:e},this.el=e,e}}]),t}(a);y.Meta={key:"Input",name:"默认输入框",iconClassName:"zppicon-wenbenshurukuang"};var m=y,g={HeadWord:{startKey:65,endKey:90,currKey:65,deep:[],getKey:function(){if(this.currKey>this.endKey){if(this.deep.length<=0)this.deep.push(this.startKey);else{var e=this.deep.length,t=this.deep[e-1];t>this.endKey?(this.deep[e-1]=this.startKey,this.deep.push(this.startKey)):this.deep[e-1]=t+1}this.currKey=this.startKey}for(var n="",o=0;o<this.deep.length;o++)n+=String.fromCharCode(this.deep[o]);return n+=String.fromCharCode(this.currKey),this.currKey++,n},reset:function(){this.startKey=65,this.endKey=90,this.currKey=65,this.deep=[]}},SetHeadText:function(e,t){this.HeadWord.reset();var n=e.querySelector(".tr").children;if(t)for(var o=1;o<n.length;o++)n[o].innerText="";else for(var r=1;r<n.length;r++)n[r].innerHTML=this.HeadWord.getKey()+'<div class="colResize"></div>'},SetTdFirstText:function(e,t){var n=e.querySelector(".tbody").children;if(t)for(var o=0;o<n.length;o++)n[o].children[0].innerText="";else for(var r=0;r<n.length;r++)n[r].children[0].innerHTML=r+1+'<div class="nResize"></div>'},createDefaultEditTd:function(){var e=o.a.createElement("td",{Attr:{class:"td"}});return e.appendChild((new m).el),e}},b=function(e,t){var n=e.querySelectorAll(".td.selected");if(n&&!(n.length<=0))for(var r=0;r<n.length;r++){var i=n[r],a=i.rowSpan,l=i.colSpan;if(1!=a||1!=l){var s=i.getBoundingClientRect().left,d=document.createDocumentFragment();if(l>1){for(var c=0;c<l-1;c++)d.appendChild(g.createDefaultEditTd());i.after(d)}if(i.rowSpan=1,i.colSpan=1,a>1)for(;a>1;){for(var u=0;u<l;u++)d.appendChild(g.createDefaultEditTd());var f=i.parentElement.nextElementSibling,h=f.querySelectorAll(".td");if(!h||h.length<=0)f.appendChild(d),i=f.querySelector(".td"),a--;else{for(var p=0;p<h.length;p++){var v=h[p],y=v.getBoundingClientRect();if(y.right==s||y.left>=s){v.after(d),i=v;break}}a--}}}else o.a.removeClass(i,"selected")}},N={addRow:function(e){var t=e.querySelector(".td.selected");if(t){var n=e.querySelectorAll(".thead .th").length,o=t.parentNode;if(n!=o.children.length){if(!o.previousElementSibling)return void this.addTrToFirst(e,o);if(!o.nextElementSibling)return void this.addTrToLast(e);this.addTrToMiddle({TdNode:t,TrNode:o,TbNode:e,countTdLen:n})}else this.addTrToLast(e,o)}else this.addTrToLast(e)},addTrToLast:function(e,t){var n=e.querySelectorAll(".thead .th").length,o=this.createNewTrNode(n);t?t.after(o):e.querySelector(".tbody").appendChild(o),g.SetTdFirstText(e)},addTrToFirst:function(e,t){for(var n=t.children,o=0,r=0;r<n.length;r++){var i=n[r];i.rowSpan>1?i.rowSpan+=1:o++}var a=this.createNewTrNode(o);t.after(a),g.SetTdFirstText(e)},addTrToMiddle:function(e){for(var t=e.TdNode,n=e.TrNode,o=e.countTdLen,r=t.getBoundingClientRect().bottom,i=n,a=[];i;){for(var l=i.children,s=0;s<l.length;s++){var d=l[s];d.getBoundingClientRect().bottom>r&&a.push(d)}i=i.previousElementSibling}var c=o-a.length,u=this.createNewTrNode(c);n.after(u);for(var f=0;f<a.length;f++)a[f].rowSpan+=1;g.SetTdFirstText(TbNode)},createNewTrNode:function(e,t){for(var n=o.a.createElement("tr",{Attr:{class:"tr"}}),r=0;r<e;r++){var i=void 0;0==r?((i=o.a.createElement("td")).className="firstTd",t&&(i.innerText=t)):i=g.createDefaultEditTd(),n.appendChild(i)}return n}},S={addCell:function(e){var t=e.querySelector(".td.selected");t?this.addCellToMiddle(e,t):this.addCellToLast(e)},addCellToLast:function(e){for(var t=this.addCellToTh(e),n=(t.newAvgWidth,t.TrNodes),o=0;o<n.length;o++)n[o].appendChild(g.createDefaultEditTd())},addCellToTh:function(e){for(var t=(e=e.children[0]).children,n=t[1].children,r=t[0].children[0],i=r.children,a=e.clientWidth-30,l=Math.floor(a/i.length),s=[],d=0;d<i.length;d++)if(0!=d){var c=i[d],u=c.clientWidth;u=(u-=u/a*l)>1&&u||1,u=Math.floor(u),s.push({ThNode:c,width:"".concat(u,"px")})}for(var f=0;f<s.length;f++)s[f].ThNode.setAttribute("width",s[f].width);return r.appendChild(o.a.createElement("th",{Attr:{class:"th",width:"".concat(l,"px")}})),g.SetHeadText(e),{newAvgWidth:l,TrNodes:n}},addCellToMiddle:function(e,t){for(var n=t.getBoundingClientRect().right,o=(e=e.children[0]).children[1].children,r=[],i=0;i<o.length;i++)for(var a=o[i].children,l=0;l<a.length;l++){var s=a[l],d=s.getBoundingClientRect();if(d.left<n&&d.right>=n){d.right==n?r.push({Node:s,type:"after"}):d.right>n&&(r.push({Node:s,type:"merge"}),s.rowSpan>1&&(i+=s.rowSpan-1));break}if(d.left==n){s.colSpan<=1?r.push({Node:s,type:"before"}):r.push({Node:s,type:"merge"}),s.rowSpan>1&&(i+=s.rowSpan-1);break}}this.addCellToTh(e.parentNode);for(var c=0;c<r.length;c++){var u=r[c];"merge"==u.type?u.Node.colSpan+=1:"before"==u.type?u.Node.before(g.createDefaultEditTd()):"after"==u.type&&u.Node.after(g.createDefaultEditTd())}}},T={deleteRow:function(e){var t=e.querySelectorAll(".td.selected"),n=t[0];if(n){for(var r=0;r<t.length;r++)0!=r&&o.a.removeClass(t[r],"selected");var i=t.length;if(1==n.rowSpan&&1==n.colSpan&&1==i)return this.deleteSingleRow(n),void g.SetTdFirstText(e);var a=t[i-1].getBoundingClientRect(),l=(a.left,a.bottom);(n.rowSpan>1||n.colSpan>1)&&b(e);for(var s=[n];n;){var d=n.parentNode.nextElementSibling&&n.parentNode.nextElementSibling.children||[];d.length<=0&&(n=!1);for(var c=0;c<d.length;c++){var u=d[c],f=u.getBoundingClientRect();f.left;f.bottom<=l?(n=u,s.push(u)):n=!1;break}}for(var h=0;h<s.length;h++)this.deleteSingleRow(s[h]);g.SetTdFirstText(e)}},deleteSingleRow:function(e){var t=e.getBoundingClientRect(),n=(t.top,t.bottom),o=e.parentNode,r=o.nextElementSibling,i=r&&r.children||!1,a=o.children;if(i)for(var l=0;l<a.length;l++){var s=a[l],d=s.getBoundingClientRect(),c=d.left,u=d.right;if(s.rowSpan>1){var f=this.createNewTdNode();f.rowSpan=s.rowSpan-1,f.colSpan=s.colSpan;for(var h=0;h<i.length;h++){var p=i[h],v=p.getBoundingClientRect(),y=v.left;if(v.right==c){s.rowSpan=1,p.after(f);break}if(y>=u){s.rowSpan=1,p.before(f);break}}}}for(var m=o.previousElementSibling,g=[];m;){for(var b=m.children,N=0;N<b.length;N++){var S=b[N];S.getBoundingClientRect().bottom>=n&&g.push(S)}m=m.previousElementSibling}o.parentNode.removeChild(o);for(var T=0;T<g.length;T++)g[T].rowSpan-=1}},C={deleteCell:function(e){var t=e.querySelector(".td.selected");if(t){for(var n=t.parentNode.children,o=t.getBoundingClientRect().left,r=0,i=0;i<n.length;i++)n[i].className.indexOf("selected")>-1&&(r=n[i].getBoundingClientRect().right);for(var a=[],l=e.children[0].children[0].querySelector(".tr").children,s=0;s<l.length;s++){var d=l[s],c=d.getBoundingClientRect(),u=c.left,f=c.right;o<=u&&r>=f&&a.push(d)}for(var h=0;h<a.length;h++)this.deleteSingleTd(a[h]);g.SetHeadText(e)}},deleteSingleTd:function(e){for(var t=e.getBoundingClientRect().right,n=e.parentNode.parentNode.nextElementSibling.children,o=[],r=0;r<n.length;r++)for(var i=n[r].children,a=0;a<i.length;a++){var l=i[a],s=l.getBoundingClientRect();if(s.left<t&&s.right>=t){s.right==t?(l.colSpan>1?o.push({Node:l,type:"merge"}):o.push({Node:l,type:"delete"}),l.rowSpan>1&&(r+=l.rowSpan-1)):s.right>t&&(l.colSpan>1?o.push({Node:l,type:"merge"}):o.push({Node:l,type:"delete"}),l.rowSpan>1&&(r+=l.rowSpan-1));break}if(s.left==t){l.colSpan<=1?o.push({Node:l,type:"delete"}):o.push({Node:l,type:"merge"}),l.rowSpan>1&&(r+=l.rowSpan-1);break}}e.parentNode.removeChild(e);for(var d=0;d<o.length;d++){var c=o[d];"merge"==c.type?c.Node.colSpan-=1:"delete"==c.type&&c.Node.parentNode.removeChild(c.Node)}}},x={mergeCell:d,splitCell:b,addRow:function(){N.addRow.apply(N,arguments)},addCell:function(){S.addCell.apply(S,arguments)},deleteRow:function(){T.deleteRow.apply(T,arguments)},deleteCell:function(){C.deleteCell.apply(C,arguments)}},_={_isDrag:!1,_MouseDownPositonX:0,_ThNode:!1,_ThNextNode:!1,_thNodeWidth:0,_thNextNodeWidth:0,GlobalEvents:[],init:function(e,t){if(!this.GlobalEvents[t]){this.GlobalEvents[t]=[];var n=this,o=function(e){n.startMouseDown(e),e.stopPropagation()};e.addEventListener("mousedown",o,!1),this.GlobalEvents[t].push({remove:function(){e.removeEventListener("mousedown",o)}});var r=l.a.addEventListener("mousemove",(function(e){n._isDrag&&n.setDragSize(e)}));this.GlobalEvents[t].push(r);var i=l.a.addEventListener("mouseup",(function(e){n.endColResize()}));this.GlobalEvents[t].push(i)}},destroy:function(e){var t=this.GlobalEvents[e];if(t){for(var n=0;n<t.length;n++)t[n].remove&&t[n].remove();delete this.GlobalEvents[e]}},startMouseDown:function(e){e.target.className.indexOf("colResize")>-1&&(this._MouseDownPositonX=e.pageX,this._isDrag=!0,this._ThNode=e.target.parentNode,this._ThNextNode=this._ThNode.nextElementSibling,this._thNodeWidth=this._ThNode.clientWidth,this._thNextNodeWidth=this._ThNextNode.clientWidth)},setDragSize:function(e){var t=e.pageX-this._MouseDownPositonX,n=this._thNodeWidth+t,o=this._thNextNodeWidth-t;n<1||o<1||(this._ThNode.setAttribute("width","".concat(n,"px")),this._ThNextNode.setAttribute("width","".concat(o,"px")))},endColResize:function(){this._isDrag=!1}},w={_isDrag:!1,_MouseDownPositonY:0,_TdNode:!1,_TdNextNode:!1,_tdNodeWidth:0,_tdNextNodeWidth:0,GlobalEvents:{},init:function(e,t){if(!this.GlobalEvents[t]){this.GlobalEvents[t]=[];var n=this,o=function(e){n.startMouseDown(e),e.stopPropagation()};e.addEventListener("mousedown",o,!1),this.GlobalEvents[t].push({remove:function(){e.removeEventListener("mousedown",o)}});var r=l.a.addEventListener("mousemove",(function(e){n._isDrag&&n.setDragSize(e)}));this.GlobalEvents[t].push(r);var i=l.a.addEventListener("mouseup",(function(e){n.endResize()}));this.GlobalEvents[t].push(i)}},destroy:function(e){var t=this.GlobalEvents[e];if(t){for(var n=0;n<t.length;n++)t[n].remove&&t[n].remove();delete this.GlobalEvents[e]}},startMouseDown:function(e){if(e.target.className.indexOf("nResize")>-1){this._MouseDownPositonY=e.pageY,this._isDrag=!0,e.target.parentNode.parentNode.nextElementSibling,this._TdNode=e.target.parentNode;var t=this._TdNode.parentNode.nextElementSibling;this._tdNodeWidth=this._TdNode.clientHeight,t?(this._TdNextNode=t.querySelector(".firstTd"),this._tdNextNodeWidth=this._TdNextNode.clientHeight):this._TdNextNode=!1}},setDragSize:function(e){var t=e.pageY-this._MouseDownPositonY,n=this._tdNodeWidth+t;if(n<1&&(n=1),this._TdNextNode){var o=this._tdNextNodeWidth-t;o<1&&(o=1),this._TdNextNode.setAttribute("height","".concat(o,"px"))}this._TdNode.setAttribute("height","".concat(n,"px"))},endResize:function(){this._isDrag=!1}};function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function R(e,t,n){return t&&k(e.prototype,t),n&&k(e,n),e}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var j=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,n=!(r=M(t).call(this))||"object"!==E(r)&&"function"!=typeof r?O(o):r,e?n.Meta=e:(n.Meta=n.defaultMeta(),n.Meta.id=n.genId()),Form_Core.Instances[n.Meta.id]=O(n),Form_Core.CurrentInstances=O(n),n.render(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(t,e),R(t,[{key:"defaultMeta",value:function(){return{key:t.Meta.key,name:t.Meta.name,OtherSettings:{},Settings:{},trs:[{Settings:{},tds:[{Settings:{}},{Settings:{}},{Settings:{}},{Settings:{}},{Settings:{}}]},{Settings:{},tds:[{Settings:{}},{Settings:{}},{Settings:{}},{Settings:{}},{Settings:{}}]},{Settings:{},tds:[{Settings:{}},{Settings:{}},{Settings:{}},{Settings:{}},{Settings:{}}]}]}}}]),R(t,[{key:"render",value:function(){var e=this.genControlItemNode().controlItemNode;return o.a.addClass(e,this.Meta.key),e.appendChild(this.renderTable()),this.el=e,e}},{key:"bindTbSelection",value:function(){var e=this.el.children[0].children;s.init(e[1],this.el.id)}},{key:"bindColResize",value:function(){_.init(this.el.querySelector(".thead"),this.el.id)}},{key:"bindNResize",value:function(){w.init(this.el.querySelector(".tbody"),this.el.id)}},{key:"openDesign",value:function(){o.a.addClass(this.el,"design"),g.SetHeadText(this.el),g.SetTdFirstText(this.el),this.bindTbSelection(),this.bindColResize(),this.bindNResize()}},{key:"closeDesign",value:function(){o.a.removeClass(this.el,"design"),g.SetHeadText(this.el,!0),g.SetTdFirstText(this.el,!0),_.destroy(this.el.id),w.destroy(this.el.id),s.destroy(this.el.id)}},{key:"renderTable",value:function(){var e=o.a.createElement("table"),t=this.Meta.trs,n=o.a.createElement("tbody",{Attr:{class:"tbody"}});if(t.length>0)for(var r=0;r<t.length;r++){var i=t[r].tds;0==r&&e.appendChild(this.renderTableHeader(i.length));var a=o.a.createElement("tr",{Attr:{class:"tr"}});if(a.appendChild(o.a.createElement("td",{Attr:{class:"firstTd",height:"50px"}})),i.length>0)for(var l=0;l<i.length;l++){var s=void 0,d=i[l];d.Control?(s=Gutil.createElement("td",{Attr:{class:"td"}}),Form_Core.findControl(d.Control.key)&&s.appendChild(Form_Core.findControl(d.Control.key)(d.Control))):s=g.createDefaultEditTd(),a.appendChild(s)}n.appendChild(a)}return e.appendChild(n),e}},{key:"renderTableHeader",value:function(e){var t=((document.querySelector("#app .MiddleView .pages").clientWidth-16)/e).toFixed(2)+"px",n=o.a.createElement("thead",{Attr:{class:"thead"}}),r=o.a.createElement("tr",{Attr:{class:"tr"}});r.appendChild(o.a.createElement("th",{Attr:{class:"th firstTh",width:"".concat(30,"px")}}));for(var i=0;i<e;i++)r.appendChild(o.a.createElement("th",{Attr:{class:"th",width:t}}));return n.appendChild(r),n}},{key:"mergeCell",value:function(){x.mergeCell(this.el)}},{key:"splitCell",value:function(){x.splitCell(this.el)}},{key:"addRow",value:function(){x.addRow(this.el)}},{key:"addCell",value:function(){x.addCell(this.el)}},{key:"deleteRow",value:function(){x.deleteRow(this.el)}},{key:"deleteCell",value:function(){x.deleteCell(this.el)}}]),t}(a);j.Meta={key:"Table",name:"表格",iconClassName:"zppicon-wenbenshurukuang"};var P=j;n(5);function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function L(e,t,n){return t&&q(e.prototype,t),n&&q(e,n),e}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var G=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,n=!(r=A(t).call(this))||"object"!==I(r)&&"function"!=typeof r?D(o):r,e?n.Meta=e:(n.Meta=n.defaultMeta(),n.Meta.id=n.genId()),Form_Core.Instances[n.Meta.id]=D(n),Form_Core.CurrentInstances=D(n),n.render(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(t,e),L(t,[{key:"defaultMeta",value:function(){return{key:t.Meta.key,name:t.Meta.name,title:t.Meta.name,isRequired:!1,direction:0,hideTitle:0,OtherSettings:{},Settings:{},placeholder:"",Value:{text:""}}}}]),L(t,[{key:"render",value:function(){var e=this.genControlItemNode().controlItemNode;e.className+=" ".concat(this.Meta.key);var t=this.genTitleNode(),n=t.titleNode,o=t.titleTextNode,r=this.genIsRequiredNode().isRequiredNode;n.appendChild(r);var i=document.createElement("div");i.className="controlContent";var a=document.createElement("textarea");return a.className="txtArea",a.setAttribute("placeholder",this.Meta.placeholder),a.value=this.Meta.Value.text,i.appendChild(a),e.appendChild(n),e.appendChild(i),this.elementObj={controlItemNode:e,titleNode:n,titleTextNode:o,isRequiredNode:r,contentNode:i,textareNode:a},this.el=e,e}}]),t}(a);G.Meta={key:"TextInput",name:"文本输入框",iconClassName:"zppicon-wenbenshurukuang"};var z=G;n(6);function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function X(e,t,n){return t&&K(e.prototype,t),n&&K(e,n),e}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var J=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,n=!(r=H(t).call(this))||"object"!==W(r)&&"function"!=typeof r?V(o):r,e?n.Meta=e:(n.Meta=n.defaultMeta(),n.Meta.id=n.genId()),Form_Core.Instances[n.Meta.id]=V(n),Form_Core.CurrentInstances=V(n),n.render(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(t,e),X(t,[{key:"defaultMeta",value:function(){for(var e=[],n="radio_".concat(+new Date),o=0;o<15;o++)e.push({name:n,value:o,text:"选项".concat(o+1)});return{key:t.Meta.key,name:t.Meta.name,title:t.Meta.name,isRequired:!1,direction:0,hideTitle:0,OtherSettings:{},Settings:{},Values:{selectVlaue:0,Options:e}}}}]),X(t,[{key:"render",value:function(){var e=this.genControlItemNode().controlItemNode;e.className+=" ".concat(this.Meta.key);var t=this.genTitleNode(),n=t.titleNode,o=t.titleTextNode,r=this.genIsRequiredNode().isRequiredNode;n.appendChild(r);var i=document.createElement("div");return i.className="controlContent",i.appendChild(this.renderOptions()),e.appendChild(n),e.appendChild(i),this.elementObj={controlItemNode:e,titleNode:n,isRequiredNode:r,contentNode:i,titleTextNode:o},this.el=e,e}},{key:"renderOptions",value:function(){for(var e=document.createDocumentFragment(),t=this.Meta.Values.Options,n=this.Meta.Values.selectVlaue,r=0;r<t.length;r++){var i=t[r],a=o.a.createElement("label",{Attr:{class:"radioOption"}}),l=o.a.createElement("input",{Attr:{class:"txtRadio",checked:n==i.value,type:"radio",name:i.name,value:i.value}}),s=o.a.createElement("span",{Attr:{class:"text"},Default:{innerText:i.text}});a.appendChild(l),a.appendChild(s),e.appendChild(a)}return e}}]),t}(a);J.Meta={key:"Radio",name:"单选按钮",iconClassName:"zppicon-wenbenshurukuang"};var Q=J;n(7);function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ee(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function te(e,t,n){return t&&ee(e.prototype,t),n&&ee(e,n),e}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var oe=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,n=!(r=Z(t).call(this))||"object"!==U(r)&&"function"!=typeof r?$(o):r,e?n.Meta=e:(n.Meta=n.defaultMeta(),n.Meta.id=n.genId()),Form_Core.Instances[n.Meta.id]=$(n),Form_Core.CurrentInstances=$(n),n.render(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(t,e),te(t,[{key:"defaultMeta",value:function(){for(var e=[],n="Select_".concat(+new Date),o=0;o<15;o++)e.push({name:n,value:o,text:"选项".concat(o+1)});return{key:t.Meta.key,name:t.Meta.name,title:t.Meta.name,isRequired:!1,direction:0,hideTitle:0,OtherSettings:{},Settings:{},Values:{selectVlaue:7,Options:e}}}}]),te(t,[{key:"render",value:function(){var e=this.genControlItemNode().controlItemNode;e.className+=" ".concat(this.Meta.key);var t=this.genTitleNode(),n=t.titleNode,o=t.titleTextNode,r=this.genIsRequiredNode().isRequiredNode;n.appendChild(r);var i=document.createElement("div");return i.className="controlContent",i.appendChild(this.renderOptions()),e.appendChild(n),e.appendChild(i),this.elementObj={controlItemNode:e,titleNode:n,isRequiredNode:r,contentNode:i,titleTextNode:o},this.el=e,e}},{key:"renderOptions",value:function(){for(var e=this.Meta.Values.Options,t=this.Meta.Values.selectVlaue,n=o.a.createElement("select",{Attr:{class:"select"}}),r=0;r<e.length;r++){var i=e[r],a=o.a.createElement("option",{Attr:{class:"option",checked:t==i.value,value:i.value},Default:{innerText:i.text}});n.appendChild(a)}return n}}]),t}(a);oe.Meta={key:"Select",name:"下拉选择",iconClassName:"zppicon-wenbenshurukuang"};var re=oe;n(8);function ie(e){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function le(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function se(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function de(e,t,n){return t&&se(e.prototype,t),n&&se(e,n),e}function ce(e,t){return(ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ue=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,n=!(r=ae(t).call(this))||"object"!==ie(r)&&"function"!=typeof r?le(o):r,e?n.Meta=e:(n.Meta=n.defaultMeta(),n.Meta.id=n.genId()),Form_Core.Instances[n.Meta.id]=le(n),Form_Core.CurrentInstances=le(n),n.render(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ce(e,t)}(t,e),de(t,[{key:"defaultMeta",value:function(){return{key:t.Meta.key,name:t.Meta.name,OtherSettings:{},Settings:{},placeholder:"",Values:{html:t.Meta.name}}}}]),de(t,[{key:"render",value:function(){var e=this.genControlItemNode().controlItemNode;e.className+=" ".concat(this.Meta.key);var n=document.createElement("div");n.className="controlContent";var r=o.a.createElement("div",{Attr:{class:"textDiv"},Default:{innerText:t.Meta.name}});return n.appendChild(r),e.appendChild(n),this.elementObj={controlItemNode:e,TextNode:r,contentNode:n},this.el=e,e}},{key:"setContent",value:function(e){this.Meta.Values.html=e,this.elementObj.TextNode.innerHTML=e}}]),t}(a);ue.Meta={key:"Label",name:"描述文字",iconClassName:"zppicon-wenbenshurukuang"};var fe=ue;window.Form_Core={renderType:"Design",findControl:function(e){var t=!1;for(var n in this.Controls){var o=this.Controls[n].Controls||{};if(o[e]){t=o[e];break}}return t},CurrentInstances:!1,Instances:{},Controls:{BaseControls:{name:"基础",key:"BaseControl",Controls:{Label:fe,TextInput:z,Radio:Q,Select:re}},LayOutControls:{name:"布局",key:"LayOutControl",Controls:{Table:P}}}}}]);